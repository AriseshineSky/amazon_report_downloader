!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=91)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){var n=r(9),o=r(13);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,r){var n=r(55);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.String=0]="String",e[e.Counter=1]="Counter",e[e.Timer=2]="Timer"}(t.Type||(t.Type={}))},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9)),i=n(r(1)),u=n(r(2)),a=n(r(4)),c=n(r(21)),s=n(r(18)),l=function(){function e(t){(0,i.default)(this,e),this._name=t,this._isMonitor=!1}return(0,u.default)(e,[{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,o.default)(this.isMonitor))):(0,c.default)(this.name,"field name")}},{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"isMonitor",set:function(e){this._isMonitor=!!e},get:function(){return this._isMonitor}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}}]),e}();t.default=l,(0,a.default)(l,"Types",s.default)},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t,r){r(3);var n=r(23);function o(t,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,r){var o=n(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(r):i.value}},o(t,r,i||t)}e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.logWarning=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.writeLogs&&console.warn.apply(console,[e].concat(t))},e.logError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.writeLogs&&console.error.apply(console,[e].concat(t))},e.writeLogs=!1,e}();t.ErrorHandler=n},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,[{key:"publish",value:function(e,t,r){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=u},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(3)),c=n(r(6)),s=n(r(4)),l=n(r(56)),f=n(r(27)),d=n(r(24)),p=function(e){function t(e){var r;return(0,o.default)(this,t),(r=(0,u.default)(this,(0,a.default)(t).call(this,e))).setNamedMetric(t.LATENCY_SUFFIX,function(e){return new f.default(e)}),r.setNamedMetric(t.FAILURE_SUFFIX,function(e){return new d.default(e,1)}),r}return(0,c.default)(t,e),(0,i.default)(t,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:0,r=this.failureMetric;r.value=t}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(t.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(t.FAILURE_SUFFIX)}}]),t}(l.default);t.default=p,(0,s.default)(p,"LATENCY_SUFFIX","Latency"),(0,s.default)(p,"FAILURE_SUFFIX","Failure")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11);t.safeRun=function(e){try{e()}catch(t){n.ErrorHandler.logError(t)}}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(n||(n={}));var o=n;t.default=o},function(e,t,r){"use strict";var n=r(0),o=r(20);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return s.ErrorHandler}}),t.Metric=void 0;var i=o(r(54));t.Metric=i;var u=n(r(61)),a=n(r(30)),c=n(r(12)),s=r(32)},function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)return new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,o.default)(e)));if(e.length>u)return new Error("Expected ".concat(t," to be less than ").concat(u," characters, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected ".concat(t," to be non-blank"));if(!i.test(e))return new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var o=n(r(9)),i=/^[A-Za-z0-9.:@_\/-]+$/,u=127},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(9)),i=n(r(1)),u=n(r(2)),a=n(r(5)),c=n(r(13)),s=n(r(3)),l=n(r(10)),f=n(r(6)),d=n(r(4)),p=n(r(8)),h=function(e){function t(e,r){var n;return(0,i.default)(this,t),n=(0,a.default)(this,(0,s.default)(t).call(this,e)),(0,d.default)((0,c.default)(n),"truncate",!1),n.value=r,n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"validationError",value:function(){var e=(0,l.default)((0,s.default)(t.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,o.default)(this.value)));if(this.value.length>t.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(t.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,t.MAX_SIZE)}}},{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return p.default.Types.String}},{key:"canMonitor",get:function(){return!1}}]),t}(p.default);t.default=h,(0,d.default)(h,"MAX_SIZE",256)},function(e,t,r){var n=r(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(3)),c=n(r(10)),s=n(r(6)),l=n(r(8)),f=n(r(25)),d=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,o.default)(this,t),(r=(0,u.default)(this,(0,a.default)(t).call(this,e))).value=n,r}return(0,s.default)(t,e),(0,i.default)(t,[{key:"add",value:function(e){this.value+=e}},{key:"validationError",value:function(){var e=(0,c.default)((0,a.default)(t.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}},{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return l.default.Types.Counter}},{key:"canMonitor",get:function(){return!0}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"!=typeof e)return new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,o.default)(e),"'"));if(e<0)return new Error("Expected ".concat(t," to be positive, but it was ").concat(e));if(!i(e))return new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var o=n(r(9)),i=function(e){return isFinite(e)&&Math.floor(e)===e}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(3)),c=n(r(10)),s=n(r(6)),l=n(r(8)),f=n(r(25)),d=function(e){function t(e,r){var n;return(0,o.default)(this,t),(n=(0,u.default)(this,(0,a.default)(t).call(this,e))).value=r,n}return(0,s.default)(t,e),(0,i.default)(t,[{key:"validationError",value:function(){var e=(0,c.default)((0,a.default)(t.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}},{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return l.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(28)),c=n(r(3)),s=n(r(10)),l=n(r(6)),f=function(e){function t(e,r){var n;return(0,o.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e,void 0))).start(r),n._value=void 0,n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"now",value:function(){return performance.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,s.default)((0,c.default)(t.prototype),"value",this)&&(this.isStopped||this.stop(),(0,a.default)((0,c.default)(t.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,s.default)((0,c.default)(t.prototype),"value",this)},set:function(e){(0,a.default)((0,c.default)(t.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}}]),t}(n(r(26)).default);t.default=f},function(e,t,r){r(3);var n=r(23),o=r(4);function i(e,t,r,u){return(i="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,i){var u,a=n(e,t);if(a){if((u=Object.getOwnPropertyDescriptor(a,t)).set)return u.set.call(i,r),!0;if(!u.writable)return!1}if(u=Object.getOwnPropertyDescriptor(i,t)){if(!u.writable)return!1;u.value=r,Object.defineProperty(i,t,u)}else o(i,t,r);return!0})(e,t,r,u)}e.exports=function(e,t,r,n,o){if(!i(e,t,r,n||e)&&o)throw new Error("failed to set property");return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=void 0;return e.some(function(e){return null!=(r=t(e))}),r}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(65)),i=n(r(67)),u=n(r(31)),a=n(r(1)),c=n(r(2)),s=n(r(4)),l=n(r(21)),f=n(r(29)),d=["site","serviceName","methodName"],p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.context=(0,u.default)({},t)}return(0,c.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var r=t instanceof e?t.context:t,n=(0,u.default)({},this.context,r);return(this.context.relatedMetrics||r.relatedMetrics)&&(n.relatedMetrics=[].concat((0,i.default)(this.context.relatedMetrics||[]),(0,i.default)(r.relatedMetrics||[]))),new e(n)}},{key:"driverContext",value:function(){var t=this.context;t.relatedMetrics;return new e((0,o.default)(t,["relatedMetrics"]))}},{key:"getFields",value:function(){return(0,u.default)({},this.context)}},{key:"validationError",value:function(){var e=this;return(0,f.default)(d,function(t){if(null==e.context[t])return new Error("Field ".concat(t," is required, but it is ").concat(e.context[t]))})||(0,f.default)(Object.keys(this.context),function(t){return e.validateField(t)})}},{key:"validateField",value:function(e){var t=this.context[e],r="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(r," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,l.default)(t,r)}}}]),e}();t.default=p,(0,s.default)(p,"Builder",function(){function e(){(0,a.default)(this,e),(0,s.default)(this,"context",{})}return(0,c.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){this.context.relatedMetrics||(this.context.relatedMetrics=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.prototype.push.apply(this.context.relatedMetrics,t),this}},{key:"build",value:function(){return new p(this.context)}}]),e}())},function(e,t,r){var n=r(4);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){n(e,t,r[t])})}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0;t.DEFAULT_ERROR_HANDLER=function(e){throw e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),o=r(74),i=r(11),u=function(){function e(e,t){i.ErrorHandler.writeLogs=t&&t.debug,this.beaconService=new n.KatalMetricsBeaconService(e,void 0,t),this.orchestrator=new o.InstrumentOrchestrator(this.beaconService)}return e.prototype.publishAction=function(e,t,r,n){},e}();t.SpectrometerInstrument=u;var a=function(){function e(e,t){i.ErrorHandler.writeLogs=t&&t.debug,this.beaconService=new n.KatalMetricsBeaconService(e,void 0,t),this.orchestrator=new o.InstrumentOrchestrator(this.beaconService,void 0,!0,t)}return e.prototype.publishAction=function(e,t,r,n){},e}();t.SpectrometerBoomerangInstrument=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=r(11),i=r(35),u=function(){function e(e,t,r){this.siteName=e,this.config=r,t&&(this.metricsPublisher=t)}return e.prototype.initializePublisher=function(e,t){return i.KatalMetricsConfig.createPublisher(e,this.getServiceName(),t)},e.prototype.getServiceName=function(){return window.ue_pty||e.DEFAULT_SERVICE_NAME},e.prototype.publish=function(e){var t=this;this.metricsPublisher||(this.metricsPublisher=this.initializePublisher(this.siteName,this.config));var r=this.metricsPublisher;e.read().forEach(function(n){try{t.publishKatMetricFromDataPoint(n,r)}catch(i){o.ErrorHandler.logError("unable to publish data point to KatalMetrics. ",i,e)}})},e.prototype.publishKatMetricFromDataPoint=function(e,t){switch(e.type){case n.Type.Timer:t.publishTimerMonitor(e.name,e.value);break;case n.Type.String:t.publishString(e.name,e.value);break;case n.Type.Counter:t.publishCounterMonitor(e.name,e.value);break;default:o.ErrorHandler.logError("Could not map "+e.type+" to a KatalMetrics Schema.",e)}},e.SITE_NAME_PREFIX="SPX:",e.DEFAULT_SERVICE_NAME="Default",e}();t.KatalMetricsBeaconService=u},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(36)),i=r(19),u=n(r(71)),a=r(11),c=r(73),s={test:"com.amazon.eel.katal.metrics.core.nexus.sellercentral.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus.sellercentral"},l=function(){function e(){}return e.createPublisher=function(t,r,n){var o=e.createDriver(n),u=e.createContext(t,r,n);return new i.Publisher(o,void 0,u).newChildActionPublisherForMethod(e.METHOD_NAME)},e.createDriver=function(t){if(t&&t.debug){var r=new u.default;return window.spx_md=r,console.log("Cathode config:",t),r}return e.createSushiDriverBuilder(t).build()},e.createSushiDriverBuilder=function(e){var t=this.getSushiDomain(e),r=this.getSushiRealm(e);return(new o.default.Builder).withDomainRealm(t,r).withCustomSourceGroup(s[t]).withErrorHandler(function(e){a.ErrorHandler.logError(e)})},e.createContext=function(t,r,n){var o;return(o=(new i.Context.Builder).withSite(e.SITE_NAME_PREFIX+t).withServiceName(r)).withRelatedMetrics.apply(o,[new i.Metric.String("path",c.normalizePath())].concat(n&&n.http_request_id?[new i.Metric.String("http_request_id",n.http_request_id)]:[])).build()},e.getSushiDomain=function(e){var t=e&&e.domain;return-1!==["gamma","prod"].indexOf(t)?"prod":"test"},e.getSushiRealm=function(e){return e?e.realm:"USAmazon"},e.SITE_NAME_PREFIX="SPX:",e.DEFAULT_SERVICE_NAME="Default",e.METHOD_NAME="SpectrometerMetrics",e}();t.KatalMetricsConfig=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(37);var n=r(38).KatalMetricsDriverSushi;t.default=n},function(e,t){},function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.KatalMetricsDriverSushi=void 0;var o=n(r(40)),i=n(r(41)),u=n(r(42)),a=n(r(43)),c=n(r(45)),s=n(r(17)),l=n(r(46)),f=n(r(16)),d=n(r(12)),p=n(r(18)),h=n(r(48)),m="katal",v={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"},y=function(e){function t(e){var r;(0,i.default)(this,t),r=(0,a.default)(this,(0,c.default)(t).call(this)),(0,f.default)((0,s.default)(r),"sushi",void 0),(0,f.default)((0,s.default)(r),"producerId",void 0),(0,f.default)((0,s.default)(r),"sourceGroupId",void 0),(0,f.default)((0,s.default)(r),"errorHandler",void 0),(0,f.default)((0,s.default)(r),"combinedErrorHandler",function(e){if(r.errorHandler)try{return void r.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t)}r.defaultErrorHandler(e)});var n=e.domain,o=e.realm,u=e.errorHandler,l=e.sushiClient,d=e.sushiProducer,p=void 0===d?m:d,h=e.sushiClientOptions,y=e.sushiClientTransportOverride,b=e.sourceGroupId||v[n]||v.test;return r.sushi=l||r.buildSushiClient(n,o,b,h,y),r.errorHandler=u,r.producerId=p,r.sourceGroupId=b,r}return(0,l.default)(t,e),(0,u.default)(t,[{key:"beforeUnload",value:function(e){this.sushi.onSushiUnload(e)}},{key:"defaultErrorHandler",value:function(e){console.error("Error publishing metrics:"),console.error(e)}},{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"buildSushiClient",value:function(e,r,n,o,i){if(!e||!r)throw new Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new h.default(t.getRealmName(r),n,this.combinedErrorHandler,o,i)}},{key:"publish",value:function(e,t,r){var n=this,i=arguments.length<3?arguments[1]:arguments[2];this.withErrorHandling(function(){if(p.default.List!==e.type){var t=n.mapObjectTypeToNexusSchema(e.type),r=(0,o.default)({},i.context,{metricKey:e.name,value:e.value});e.isMonitor&&(r.isMonitor=!0),n.sushi.reset(),n.sushi.event(r,n.producerId,t,{ssd:1})}else e.metricList.forEach(function(e){n.publish(e,i)})})}},{key:"mapObjectTypeToNexusSchema",value:function(e){switch(e){case p.default.String:return"katal.client.metrics.String.2";case p.default.Counter:return"katal.client.metrics.Counter.3";case p.default.Timer:return"katal.client.metrics.Timer.2";default:throw new Error("Unknown type ".concat(e," when publishing metric object."))}}}],[{key:"getRealmName",value:function(e){switch(e){case"NAAmazon":case"USAmazon":return h.default.REGIONS.NA;case"EUAmazon":return h.default.REGIONS.EU;case"FEAmazon":case"JPAmazon":return h.default.REGIONS.FE;case"CNAmazon":return h.default.REGIONS.CN;default:return e}}}]),t}(d.default);t.KatalMetricsDriverSushi=y,(0,f.default)(y,"Builder",function(){function e(){(0,i.default)(this,e),(0,f.default)(this,"context",{})}return(0,u.default)(e,[{key:"withSushiClient",value:function(e){return this.context.sushiClient=e,this}},{key:"withDomainRealm",value:function(e,t){return this.context.domain=e,this.context.realm=t,this}},{key:"withCustomProducer",value:function(e){return this.context.sushiProducer=e,this}},{key:"withCustomSourceGroup",value:function(e){return this.context.sourceGroupId=e,this}},{key:"withErrorHandler",value:function(e){return this.context.errorHandler=e,this}},{key:"withSushiClientOptions",value:function(e){return this.context.sushiClientOptions=e,this}},{key:"withSushiClientTransportOverride",value:function(e){return this.context.sushiClientTransportOverride=e,this}},{key:"build",value:function(){return new y(this.context)}}]),e}())},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){var n=r(16);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){n(e,t,r[t])})}return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(44),o=r(17);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){var n=r(47);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){"use strict";var n=r(49);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(50)),i=n(r(51)),u=n(r(52)),a=n(r(53));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.REGIONS.NA,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;(0,u.default)(this,e);var a=e.createSushiUrl(t,r),c=e.createCsmUserContext(a,o);this.ue_csm=this.setupMockCSMObject(c),this.encapsulatedWindow=this.setupMockWindow(this.ue_csm),this.transportationClientCode(this.ue_csm,window),i&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(e,t){return i(e,t),!0}}),this.clientCode(this.ue_csm,this.encapsulatedWindow),this.errorHandler=n}return(0,a.default)(e,null,[{key:"createSushiUrl",value:function(t,r){if(!r)throw new Error("Sushi Driver was not provided with a source group.");var n;switch(t){case e.REGIONS.NA:n="unagi-na";break;case e.REGIONS.EU:n="unagi-eu";break;case e.REGIONS.FE:n="unagi-fe";break;case e.REGIONS.CN:n="unagi-cn";break;default:throw new Error("Unrecognized region '".concat(t,"' provided to SushiClient."))}return"https://".concat(n,".amazon.com/1/events/").concat(r)}},{key:"createCsmUserContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s({hiPriFlushInterval:1e3,lowPriFlushInterval:1e4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:void 0,errorHandlerFunction:console.log,sushiUrl:e},t)}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]),(0,a.default)(e,[{key:"event",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o&&console.log("SushiClient wrapper publishing the following:",{data:e,producerId:t,schemaId:r,options:n}),this.ue_csm.ue.event(e,t,r,n)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(e){this.ue_csm.ue.onSushiFlush(e)}},{key:"onSushiUnload",value:function(e){this.ue_csm.ue.onSushiUnload(e)}},{key:"setupMockCSMObject",value:function(e){var t=this;return{ue_hpsi:e.hiPriFlushInterval,ue_lpsi:e.lowPriFlushInterval,ue:{ssw:e.sessionStorageWrapper,log:function(e,r){t.errorHandler?t.errorHandler(e):console.log("An error has occurred in SushiClient channel "+r,e)},exec:function(e,t){return e},event:function(e,t,r){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(e,t,r){r=r||window,window.EventTarget&&window.EventTarget.prototype&&window.EventTarget.prototype.addEventListener?window.EventTarget.prototype.addEventListener.call(r,e,t,!!window.ue_clf):r.addEventListener?r.addEventListener(e,t,!!window.ue_clf):r.attachEvent&&r.attachEvent("on"+e,t)}},ueLogError:e.errorHandlerFunction,ue_surl:e.sushiUrl,ue_id:e.requestId,ue_err_chan:e.errorChannel}}},{key:"setupMockWindow",value:function(e){return{ue_csm:e,ueLogError:e.ueLogError,ue:e.ue,setTimeout:function(e,t){return window.setTimeout(e,t)}}}},{key:"clientCode",value:function(e,t){e.ue.exec(function(e,t){function r(){for(var e=0;e<arguments.length;e++){var r=arguments[e];try{if(!r.isSupported)throw dummyException;var n=R.buildPayload(T,S);return r.send(g,n)}catch(o){}}m({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},t.ue_err_chan||"jserr")}function n(){if(S.length){for(var e=0;e<x.length;e++)x[e]();r(h._sBcn||{},h._ajx||{}),S=[],M={},T={},y=b=O=C=0}}function i(e){try{return JSON.stringify(e)}catch(t){}return null}function u(r,o,u,a){var c,s=!1;return a=a||{},++E==l&&m({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},t.ue_err_chan||"jserr"),(c=!(E>=l))&&((c=r&&-1<r.constructor.toString().indexOf("Object")&&o&&-1<o.constructor.toString().indexOf("String")&&u&&-1<u.constructor.toString().indexOf("String"))||0),c&&(h.count&&h.count("Event:"+u,1),r.producerId=r.producerId||o,r.schemaId=r.schemaId||u,r.timestamp=function(){var e=new Date,t=function(e){return 10>e?"0"+e:e};return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}(),o=Date.now?Date.now():+new Date,u=Math.random().toString().substring(2,12),r.messageId=e.ue_id+"-"+o+"-"+u,a&&!a.ssd&&(r.sessionId=r.sessionId||e.ue_sid,r.requestId=r.requestId||e.ue_id,r.obfuscatedMarketplaceId=r.obfuscatedMarketplaceId||e.ue_mid),(o=i(r))?(o=o.length,(S.length==f||O+o>d)&&n(),O+=o,r={data:R.compressEvent(r)},S.push(r),(a||{}).n?0===A?n():y||(y=t.setTimeout(n,A)):b||(b=t.setTimeout(n,F)),s=!0):s=!1),!s&&e.ue_int&&console.error("Invalid JS Nexus API call"),s}function a(){if(!j){for(var t=0;t<I.length;t++)I[t]();for(t=0;t<x.length;t++)x[t]();S.length&&(e.ue_sbuimp&&e.ue&&e.ue.ssw&&(t=i({dct:T,evt:S}),e.ue.ssw("eeldata",t),e.ue.ssw("eelsts","unk")),r(h._sBcn||{})),j=!0}}function c(e){I.push(e)}function s(e){x.push(e)}var l=1e3,f=499,d=524288,p=function(){},h=e.ue||{},m=h.log||p,v=e.uex||p;(e.uet||p)("bb","ue_sushi_v1",{wb:1});var y,b,g=e.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",w=["messageId","timestamp"],_="#",S=[],M={},T={},O=0,C=0,E=0,P=0,D=1,k=2,I=[],x=[],j=!1,A=void 0===e.ue_hpsi?1e3:e.ue_hpsi,F=void 0===e.ue_lpsi?1e4:e.ue_lpsi,R=function(){function e(e){return M[e]=_+C++,T[M[e]]=e,M[e]}function t(e){return e.length>(_+C).length||e.charAt(0)===_}function r(e){if(e)switch((0,o.default)(e)){case"number":return!(isNaN(e)||1/0===e)&&t(e.toString());case"boolean":break;case"string":return t(e);default:return!0}return!1}return{compressEvent:function t(n){if(r(n)){var o=P;switch(n instanceof Array?o=k:n instanceof Function?o=P:n instanceof Object&&(o=D),o){case P:n=M[n]?M[n]:e(n);break;case k:var i=n;n=[],o=i.length;for(var u=0;u<o;u++)n[u]=t(i[u]);break;case D:for(i in o={},n)n.hasOwnProperty(i)&&(o[M[i]?M[i]:e(i)]=-1==w.indexOf(i)?t(n[i]):n[i]);n=o}}return n},buildPayload:function(){return i({cs:{dct:T},events:S})}}}();!function(){if(h.event&&h.event.isStub){if(e.ue_sbuimp&&e.ue&&e.ue.ssw){var r=e.ue.ssw("eelsts").val;if(r&&"unk"===r&&(r=e.ue.ssw("eeldata").val)){var o;e:{try{o=JSON.parse(r);break e}catch(t){}o=null}o&&o.evt instanceof Array&&o.dct instanceof Object&&(S=o.evt,T=o.dct,S&&T&&(n(),e.ue.ssw("eeldata","{}"),e.ue.ssw("eelsts","scs")))}}h.event.replay(function(e){e[3]=e[3]||{},e[3].n=1,u.apply(this,e)}),h.onSushiUnload.replay(function(e){c(e[0])}),h.onSushiFlush.replay(function(e){s(e[0])})}}(),h.attach("beforeunload",a),h.attach("pagehide",a),h._cmps=R,h.event=u,h.event.reset=function(){E=0},h.onSushiUnload=c,h.onSushiFlush=s;try{t.P&&t.P.register&&t.P.register("sushi-client",p)}catch(N){e.ueLogError(N,{logLevel:"WARN"})}v("ld","ue_sushi_v1",{wb:1})},"Nxs-JS-Client")(e,t)}},{key:"transportationClientCode",value:function(e,t){e.ue.exec(function(e,t){var r=function(){},n={send:function(e,n){if(n&&e){var o;if(t.XDomainRequest)(o=new XDomainRequest).onerror=r,o.ontimeout=r,o.onprogress=r,o.onload=r,o.timeout=0;else if(t.XMLHttpRequest){if(!("withCredentials"in(o=new XMLHttpRequest)))throw""}else o=void 0;if(!o)throw"";o.open("POST",e,!0),o.setRequestHeader&&o.setRequestHeader("Content-type","text/plain"),o.send(n)}},isSupported:!0},o={send:function(t,r){if(t&&r){if(!navigator.sendBeacon(t,r))throw"";e.ue_sbuimp&&e.ue&&e.ue.ssw&&e.ue.ssw("eelsts","scs")}},isSupported:!(!navigator.sendBeacon||t.cordova&&t.cordova.platformId&&"ios"==t.cordova.platformId)};e.ue._ajx=n,e.ue._sBcn=o},"Transportation-clients")(e,t)}}]),e}();t.default=l},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return f.default}});var o=n(r(8)),i=n(r(22)),u=n(r(24)),a=n(r(26)),c=n(r(27)),s=n(r(14)),l=n(r(59)),f=n(r(60))},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(3)),c=n(r(6)),s=n(r(57)),l=n(r(58)),f=function(e){function t(e){var r;return(0,o.default)(this,t),(r=(0,u.default)(this,(0,a.default)(t).call(this,e))).namedMetrics={},r}return(0,c.default)(t,e),(0,i.default)(t,[{key:"setNamedMetric",value:function(e,t){var r=t(this.getNameForSubMetric(e));r.canMonitor&&(r.isMonitor=this.isMonitor),this.namedMetrics[e]=r}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,r){null==r?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,function(e){return new t(e,r)}).value=r}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}},{key:"metricList",get:function(){return(0,l.default)(this.namedMetrics)}}]),t}(s.default);t.default=f},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(10)),c=n(r(3)),s=n(r(28)),l=n(r(6)),f=n(r(8)),d=n(r(29)),p=function(e){function t(e){return(0,o.default)(this,t),(0,u.default)(this,(0,c.default)(t).call(this,e))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"validationError",value:function(){return(0,d.default)(this.metricList,function(e){return e.validationError()})}},{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",set:function(e){(0,s.default)((0,c.default)(t.prototype),"isMonitor",e,this,!0),this.metricList.forEach(function(t){t.canMonitor&&(t.isMonitor=e)})},get:function(){return(0,a.default)((0,c.default)(t.prototype),"isMonitor",this)}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return f.default.Types.List}}]),t}(f.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.values?Object.values:function(e){return Object.keys(e).map(function(t){return e[t]})};t.default=n},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(5)),u=n(r(3)),a=n(r(6)),c=n(r(4)),s=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(0,u.default)(t).call(this,t.INITIALIZE_METRIC_NAME))}return(0,a.default)(t,e),t}(n(r(14)).default);t.default=s,(0,c.default)(s,"INITIALIZE_METRIC_NAME","Initialization")},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(1)),i=n(r(2)),u=n(r(5)),a=n(r(3)),c=n(r(6)),s=n(r(4)),l=n(r(14)),f=n(r(22)),d=function(e){function t(e){return(0,o.default)(this,t),(0,u.default)(this,(0,a.default)(t).call(this,"".concat(t.HTTP_REQUEST_PREFIX,".").concat(e)))}return(0,c.default)(t,e),(0,i.default)(t,[{key:"url",set:function(e){this.setOrDeleteNamedMetricValue(t.URL_SUFFIX,f.default,e)},get:function(){return this.getNamedMetricValue(t.URL_SUFFIX)}},{key:"urlMetric",get:function(){return this.getNamedMetric(t.URL_SUFFIX)}},{key:"statusCode",set:function(e){this.setOrDeleteNamedMetricValue(t.STATUS_CODE_SUFFIX,f.default,e)},get:function(){return this.getNamedMetricValue(t.STATUS_CODE_SUFFIX)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(t.STATUS_CODE_SUFFIX)}},{key:"statusText",set:function(e){this.setOrDeleteNamedMetricValue(t.STATUS_TEXT_SUFFIX,f.default,e)},get:function(){return this.getNamedMetricValue(t.STATUS_TEXT_SUFFIX)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(t.STATUS_TEXT_SUFFIX)}}]),t}(l.default);t.default=d,(0,s.default)(d,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,s.default)(d,"URL_SUFFIX","URL"),(0,s.default)(d,"STATUS_CODE_SUFFIX","StatusCode"),(0,s.default)(d,"STATUS_TEXT_SUFFIX","StatusText")},function(e,t,r){"use strict";var n=r(20),o=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(r(1)),u=o(r(2)),a=o(r(4)),c=o(r(62)),s=o(r(30)),l=o(r(8)),f=n(r(19)),d=function(e){console.error("Error publishing metrics:"),console.error(e)},p=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.default;if((0,i.default)(this,e),(0,a.default)(this,"combinedErrorHandler",function(e){try{r.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),d(e)}}),o instanceof s.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=n,this.context=o instanceof s.default?o:new s.default(o)}return(0,u.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"publish",value:function(e){var t=this;this.withErrorHandling(function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(l.default.Types.List===e.type)e.metricList.forEach(function(e){t.publish(e)});else{var r=t.context.driverContext(),n=r.validationError();if(n)throw n;var o=e.validationError();if(o)throw o;t.driver.publish(e,t.combinedErrorHandler,r)}})}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(e){var t=new s.default({actionId:this._generateActionid()}),r=this.newChildPublisher(t.merge(e));return this.context.context.relatedMetrics&&this.context.context.relatedMetrics.forEach(function(e){r.publish(e)}),r}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new s.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new f.Metric.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var r=new f.Metric.String(e,t);r.truncate=!0,this.publish(r)}},{key:"publishCounter",value:function(e,t){this.publish(new f.Metric.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new f.Metric.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new f.Metric.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new f.Metric.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(){return(0,c.default)()}}]),e}();t.default=p},function(e,t,r){var n=r(63),o=r(64);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var u=(e=e||{}).random||(e.rng||n)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t)for(var a=0;a<16;++a)t[i+a]=u[a];return t||o(u)}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){var n=r(66);e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)r=u[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},function(e,t,r){var n=r(68),o=r(69),i=r(70);e.exports=function(e){return n(e)||o(e)||i()}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,r){"use strict";var n=r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(72)),i=n(r(31)),u=n(r(1)),a=n(r(2)),c=n(r(5)),s=n(r(3)),l=n(r(13)),f=n(r(6)),d=n(r(4)),p=n(r(12)),h=n(r(8)),m=r(32),v=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_ERROR_HANDLER;return(0,u.default)(this,t),e=(0,c.default)(this,(0,s.default)(t).call(this)),(0,d.default)((0,l.default)(e),"metrics",[]),(0,d.default)((0,l.default)(e),"beforeUnloadHandlers",[]),e.errorHandler=r,e}return(0,f.default)(t,e),(0,a.default)(t,[{key:"getMetricArray",value:function(){return this.metrics}},{key:"clearMetricArray",value:function(){this.metrics=[]}},{key:"getAndClearMetricArray",value:function(){var e=this.getMetricArray();return this.clearMetricArray(),e}},{key:"beforeUnload",value:function(e){this.beforeUnloadHandlers.push(e)}},{key:"runPendingBeforeUnloadHandlers",value:function(){this.beforeUnloadHandlers.forEach(function(e){e()});var e=this.beforeUnloadHandlers.length;return this.beforeUnloadHandlers=[],e}},{key:"publish",value:function(e,t,r){var n=(0,i.default)({},r.getFields());switch(e.type){case h.default.Types.String:case h.default.Types.Counter:case h.default.Types.Timer:(0,o.default)(n,{type:e.type,metricKey:e.name,value:e.value}),e.isMonitor&&(n.isMonitor=!0);break;default:var u=new Error("Unknown type ".concat(e.type," when publishing metric object."));return void this.errorHandler(u)}this.metrics.push(n)}}]),t}(p.default);t.default=v},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePath=function(){return window.location.pathname.replace(/\/ref=.*/,"").replace(/\/\b\d{3}-\d{7}-\d{7}\b/g,"").replace(/;jsessionid=.*$/g,"")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(75),o=r(77),i=r(80),u=r(85),a=function(){function e(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n={}),this.beaconService=e,this.config=n,this.instruments=[],this.readyFired=!1,this.instruments=t||this.buildInstruments(r),this.addListeners()}return e.prototype.addListeners=function(){var e=this;document.addEventListener("readystatechange",function(t){e.checkAndInformInstrumentsIfDomComplete()}),window.onbeforeunload=function(){e.informAllOfUnload()},this.checkAndInformInstrumentsIfDomComplete()},e.prototype.buildInstruments=function(e){return e?[new i.BoomerangInstrument(this.beaconService,this.config),new n.FrontEndFatals(this.beaconService),new o.CTCFInstrument(this.beaconService),new u.BrowserPerformanceInstrument(this.beaconService)]:[new n.FrontEndFatals(this.beaconService),new o.CTCFInstrument(this.beaconService),new u.BrowserPerformanceInstrument(this.beaconService)]},e.prototype.informAllOfUnload=function(){var e=this;this.instruments.forEach(function(t){t.documentWillUnload().forEach(function(t){return e.beaconService.publish(t)})})},e.prototype.checkAndInformInstrumentsIfDomComplete=function(){"complete"!==document.readyState||this.readyFired||(this.readyFired=!0,this.instruments.forEach(function(e){e.documentReady()}))},e}();t.InstrumentOrchestrator=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(76),o=function(){function e(e){var t=this;this.beaconService=e,this.errorCount=0,window.addEventListener("error",function(){t.errorCount++})}return e.prototype.documentReady=function(){var e=this;this.timeout=setInterval(function(){var t=e.getErrorVectorIfCounted();t&&e.beaconService.publish(t)},2e3)},e.prototype.getErrorVectorIfCounted=function(){var e=null;return this.errorCount>0&&(e=new n.JsErrorDataVector(this.errorCount),this.errorCount=0),e},e.prototype.documentWillUnload=function(){clearTimeout(this.timeout);var e=this.getErrorVectorIfCounted();return e?[e]:[]},e}();t.FrontEndFatals=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e){this.errorsCount=e}return e.prototype.read=function(){return[{type:n.Type.Counter,name:"jsErrorCount",value:this.errorsCount}]},e}();t.JsErrorDataVector=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(78),o=r(79),i=r(15),u=function(){function e(e){this.metricsBeacon=e,this.csm=new n.CSMDataAccessor,this.foundCtcf=!1}return Object.defineProperty(e.prototype,"csmDataAccessor",{set:function(e){this.csm=e},enumerable:!0,configurable:!0}),e.prototype.documentReady=function(){var e=this,t=0,r=function(){t<=5&&window.setTimeout(function(){i.safeRun(function(){var n=e.fetchCtcf();n?(e.foundCtcf=!0,e.metricsBeacon.publish(n)):(t++,r())})},9e3)};r()},e.prototype.fetchCtcf=function(){if(this.csm.isCSMAvailable()){var e=this.csm.getData().cf;if(e)return new o.CTCFDataVector(e)}return null},e.prototype.documentWillUnload=function(){if(!this.csm.isCSMAvailable())return[new o.CSMMissingDataVector(1),new o.CSMMissingTimeDataVector(performance.now())];if(!this.foundCtcf){var e=this.fetchCtcf();if(!e)return[new o.CTCFMissingDataVector(1),new o.CTCFMissingTimeDataVector(performance.now())];this.metricsBeacon.publish(e)}return[]},e}();t.CTCFInstrument=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.isCSMAvailable=function(){return window.ue&&window.ue.iel},e.prototype.getData=function(){if(this.isCSMAvailable()){var e=this.getPairs();return this.pairsToMap(e)}return null},e.prototype.pairsToMap=function(e){var t={};return e.forEach(function(e){t[e.key]=e.value}),t},e.prototype.getPairs=function(){var e=this,t=this.getPostbackUrls().map(function(t){var r=-1!=t.indexOf("//fls"),n=e.decodePostback(t,r);return e.getPostbackPairs(n)});return[].concat.apply([],t)},e.prototype.getPostbackPairs=function(e){return(e=e.substr(e.indexOf("?"))).split("&").map(function(e){var t=e.split("=");return{key:t[0],value:t[1]||""}})},e.prototype.decodePostback=function(e,t){if(!t)return e;var r=e.split("$uedata=")[1].substr(2);return decodeURIComponent(r)},e.prototype.getPostbackUrls=function(){return ue.iel.map(function(e){return e.src}).concat(ue.ielf)},e}();t.CSMDataAccessor=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e){this.clicktoCf=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"clickToCF",value:this.clicktoCf}]},e}();t.CTCFDataVector=o;var i=function(){function e(e){this.unloadBeforeClickToCF=e}return e.prototype.read=function(){return[{type:n.Type.Counter,name:"unloadBeforeClickToCF",value:this.unloadBeforeClickToCF}]},e}();t.CTCFMissingDataVector=i;var u=function(){function e(e){this.unloadTimeBeforeClickToCF=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"unloadTimeBeforeClickToCF",value:this.unloadTimeBeforeClickToCF}]},e}();t.CTCFMissingTimeDataVector=u;var a=function(){function e(e){this.unloadBeforeCSM=e}return e.prototype.read=function(){return[{type:n.Type.Counter,name:"unloadBeforeCSM",value:this.unloadBeforeCSM}]},e}();t.CSMMissingDataVector=a;var c=function(){function e(e){this.unloadTimeBeforeCSM=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"unloadTimeBeforeCSM",value:this.unloadTimeBeforeCSM}]},e}();t.CSMMissingTimeDataVector=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(81),o=r(82),i=r(83),u=r(84),a=r(15),c=function(){function e(e,t){this.beaconService=e,this.config=t,this.ctciSent=!1,this.unloadDurationSent=!1,this.redirectDurationSent=!1,this.domainLookupDurationSent=!1,this.tcpDurationSent=!1,this.requestDurationSent=!1,this.responseDurationSent=!1,this.domProcessingDurationSent=!1,this.onloadDurationSent=!1,this.isHidden=!1}return e.prototype.boomerangInit=function(){var e=this;a.safeRun(function(){var t=window.BOOMR;t?a.safeRun(function(){e.processBoomerangData(t)}):document.addEventListener("onBoomerangLoaded",function(t){a.safeRun(function(){e.processBoomerangData(t.detail.BOOMR)})})})},e.prototype.documentReady=function(){var e=this;a.safeRun(function(){e.isHidden=document.hidden;var t=document;"complete"===document.readyState&&e.handleBoomerInitTimeAfterDomComplete(performance.now());var r=!1,n=new MutationObserver(function(){setTimeout(function(){r||(e.handleBoomerInitTimeAfterMutationObserver(performance.now()),r=!0,e.boomerangInit())},1e3)});t&&n.observe(t,{childList:!0,subtree:!0})})},e.prototype.processBoomerangData=function(e){var t=this;a.safeRun(function(){e.init(u.BoomerangConfig),e.subscribe("before_beacon",function(e){t.captureCtCi(e),t.config.browserPerformance&&(t.captureBrowserPerformanceMetricDuration(e,t.unloadDurationSent,"nt_unload_st","nt_unload_end"),t.captureBrowserPerformanceMetricDuration(e,t.redirectDurationSent,"nt_red_st","nt_red_end"),t.captureBrowserPerformanceMetricDuration(e,t.domainLookupDurationSent,"nt_dns_st","nt_dns_end"),t.captureBrowserPerformanceMetricDuration(e,t.tcpDurationSent,"nt_con_st","nt_con_end"),t.captureBrowserPerformanceMetricDuration(e,t.requestDurationSent,"nt_req_st","nt_res_st"),t.captureBrowserPerformanceMetricDuration(e,t.responseDurationSent,"nt_res_st","nt_res_end"),t.captureBrowserPerformanceMetricDuration(e,t.domProcessingDurationSent,"nt_domloading","nt_domcomp"),t.captureBrowserPerformanceMetricDuration(e,t.onloadDurationSent,"nt_load_st","nt_load_end"))})})},e.prototype.captureCtCi=function(e){this.ctciSent||e["c.tti"]&&(this.handleBoomerangTiming(e["c.tti"]),this.ctciSent=!0)},e.prototype.captureBrowserPerformanceMetricDuration=function(e,t,r,n){if(!t&&e[r]&&e[n]){var o=e[n]-e[r];this.handleBrowserPerformanceMetricDuration(r,o)}},e.prototype.handleBrowserPerformanceMetricDuration=function(e,t){var r=this;a.safeRun(function(){try{var n=r.getBrowserPerformanceDataVector(e,t);r.beaconService.publish(n)}catch(o){console.log(o)}})},e.prototype.getBrowserPerformanceDataVector=function(e,t){switch(e){case"nt_unload_st":return this.unloadDurationSent=!0,new o.UnloadDurationDataVector(t);case"nt_red_st":return this.redirectDurationSent=!0,new o.RedirectDurationDataVector(t);case"nt_dns_st":return this.domainLookupDurationSent=!0,new o.DomainLookupDurationDataVector(t);case"nt_con_st":return this.tcpDurationSent=!0,new o.TcpDurationDataVector(t);case"nt_req_st":return this.requestDurationSent=!0,new o.RequestDurationDataVector(t);case"nt_res_st":return this.responseDurationSent=!0,new o.ResponseDurationDataVector(t);case"nt_domloading":return this.domProcessingDurationSent=!0,new o.DomProcessingDurationDataVector(t);case"nt_load_st":return this.onloadDurationSent=!0,new o.OnloadDurationDataVector(t);default:throw"There was an error finding the correct Data Vector for "+e}},e.prototype.handleBoomerangTiming=function(e){var t=this;a.safeRun(function(){t.beaconService.publish(t.isHidden?new n.TimeToInteractiveBackgroundLoadDataVector(e):new n.TimeToInteractiveDataVector(e))})},e.prototype.handleBoomerInitTimeAfterDomComplete=function(e){var t=this;a.safeRun(function(){t.beaconService.publish(new n.BoomerInitTimeAfterDomCompleteDataVector(e))})},e.prototype.handleBoomerInitTimeAfterMutationObserver=function(e){var t=this;a.safeRun(function(){t.beaconService.publish(new n.BoomerInitTimeAfterMutationObserverDataVector(e))})},e.prototype.documentWillUnload=function(){return this.ctciSent?[]:[new i.MissedTimeToInteractiveDataVector(1),new i.MissedTimeToInteractiveTimeDataVector(performance.now())]},e}();t.BoomerangInstrument=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e){this.timeToInteractive=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"clickToCI",value:this.timeToInteractive}]},e}();t.TimeToInteractiveDataVector=o;var i=function(){function e(e){this.timeToInteractive=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"clickToCIBackground",value:this.timeToInteractive}]},e}();t.TimeToInteractiveBackgroundLoadDataVector=i;var u=function(){function e(e){this.boomerInitTimeAfterDomComplete=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"boomerInitTimeAfterDomComplete",value:this.boomerInitTimeAfterDomComplete}]},e}();t.BoomerInitTimeAfterDomCompleteDataVector=u;var a=function(){function e(e){this.boomerInitTimeAfterMutationObserver=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"boomerInitTimeAfterMutationObserver",value:this.boomerInitTimeAfterMutationObserver}]},e}();t.BoomerInitTimeAfterMutationObserverDataVector=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e){this.unloadDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"unloadDuration",value:this.unloadDuration}]},e}();t.UnloadDurationDataVector=o;var i=function(){function e(e){this.redirectDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"redirectDuration",value:this.redirectDuration}]},e}();t.RedirectDurationDataVector=i;var u=function(){function e(e){this.domainLookupDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"domainLookupDuration",value:this.domainLookupDuration}]},e}();t.DomainLookupDurationDataVector=u;var a=function(){function e(e){this.tcpDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"tcpDuration",value:this.tcpDuration}]},e}();t.TcpDurationDataVector=a;var c=function(){function e(e){this.requestDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"requestDuration",value:this.requestDuration}]},e}();t.RequestDurationDataVector=c;var s=function(){function e(e){this.responseDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"responseDuration",value:this.responseDuration}]},e}();t.ResponseDurationDataVector=s;var l=function(){function e(e){this.domProcessingDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"domProcessingDuration",value:this.domProcessingDuration}]},e}();t.DomProcessingDurationDataVector=l;var f=function(){function e(e){this.onloadDuration=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"onloadDuration",value:this.onloadDuration}]},e}();t.OnloadDurationDataVector=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e){this.unloadBeforeClickToCI=e}return e.prototype.read=function(){return[{type:n.Type.Counter,name:"unloadBeforeClickToCI",value:this.unloadBeforeClickToCI}]},e}();t.MissedTimeToInteractiveDataVector=o;var i=function(){function e(e){this.unloadTimeBeforeClickToCI=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"unloadTimeBeforeClickToCI",value:this.unloadTimeBeforeClickToCI}]},e}();t.MissedTimeToInteractiveTimeDataVector=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoomerangConfig={beacon_type:"POST",instrument_xhr:!0,autorun:!0,log:null,Continuity:{ttiWaitForFrameworkReady:!1,monitorFrameRate:!0,monitorStats:!0,monitorInteractions:!1,monitorLongTasks:!0,monitorPageBusy:!0,enabled:!0,afterOnload:!0,waitAfterOnload:4e4,sendTimeline:!1,isSpa:!0},AutoXHR:{monitorFetch:!0},SPA:{enabled:!0},History:{enabled:!0,auto:!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(86),o=r(87),i=r(15),u=function(){function e(e){this.beaconService=e,this.firedNavigation=!1}return e.prototype.documentReady=function(){var e=this;if(!window.PerformanceObserver||this.isSafari())this.useLevel1Api();else{var t=new PerformanceObserver(function(t){return e.processPerformanceEntries(t.getEntries())});this.processPerformanceEntries(window.performance.getEntries()),i.safeRun(function(){t.observe({entryTypes:["navigation","paint"]})})}},e.prototype.isSafari=function(){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("safari")&&-1===e.indexOf("chrome")},e.prototype.processPerformanceEntries=function(e){for(var t=this,r=function(e){i.safeRun(function(){"navigation"==e.entryType?t.handleNavigationTiming(e):"paint"==e.entryType&&t.handlePaintTiming(e)})},n=0,o=e;n<o.length;n++){r(o[n])}},e.prototype.handleNavigationTiming=function(e){!this.firedNavigation&&e.domInteractive>0&&e.domComplete>0&&(this.firedNavigation=!0,this.beaconService.publish(new n.NavigationPerformanceDataVector(e.startTime,e.domInteractive,e.domComplete)))},e.prototype.handlePaintTiming=function(e){"first-contentful-paint"===e.name&&this.beaconService.publish(new o.PaintPerformanceDataVector(e.startTime))},e.prototype.useLevel1Api=function(){this.beaconService.publish(new n.NavigationPerformanceDataVector(window.performance.timing.requestStart,window.performance.timing.domInteractive,window.performance.timing.domComplete))},e.prototype.documentWillUnload=function(){return[]},e}();t.BrowserPerformanceInstrument=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e,t,r){this.startTime=e,this.domInteractive=t,this.domComplete=r}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"domCompleteTime",value:this.domComplete-this.startTime},{type:n.Type.Timer,name:"domInteractiveTime",value:this.domInteractive-this.startTime}].filter(function(e){return e.value>0})},e}();t.NavigationPerformanceDataVector=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),o=function(){function e(e){this.firstContentfulPaint=e}return e.prototype.read=function(){return[{type:n.Type.Timer,name:"firstContentfulPaint",value:this.firstContentfulPaint}]},e}();t.PaintPerformanceDataVector=o},,,,function(e,t,r){"use strict";r.r(t);var n=r(33);!function(){try{var e=-1!==location.href.indexOf("cathodeDebug=true"),t=(o=document.getElementById("cathode-loader"))?{sitename:o.dataset.sn||null,domain:o.dataset.domain||"prod",realm:o.dataset.realm||"USAmazon",http_request_id:(r=o.dataset,r.http_request_id?r.http_request_id:window.ue_id?window.ue_id:void 0),browserPerformance:o.dataset.browserPerformance||!1,targetNode:o.dataset.targetNode||null}:null;t&&t.sitename?new n.SpectrometerBoomerangInstrument(t.sitename,{debug:e,domain:t.domain,realm:t.realm,http_request_id:t.http_request_id,browserPerformance:t.browserPerformance,targetNode:t.targetNode}):console.warn("Cathode.js: sitename not specified")}catch(i){void 0!==window.ue&&ue.count("cathodeInitFatal",1)}var r;var o}()}]);
//# sourceMappingURL=cathodeBoomerang.afe4c1409865b3fa3290.min.js.map